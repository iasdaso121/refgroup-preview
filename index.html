<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Prime Analytics – Системный бизнес на маркетплейсах</title>
    <!-- Google Fonts -->
    <link
      rel="preconnect"
      href="https://fonts.googleapis.com"
    />
    <link
      rel="preconnect"
      href="https://fonts.gstatic.com"
      crossorigin
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap"
      rel="stylesheet"
    />
    <!-- Additional font for modern look -->
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap"
      rel="stylesheet"
    />
    <!-- Animate.css for ready‑made animations -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
    />
    <!-- Font Awesome Icons -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <!-- Custom Styles -->
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <!-- Header -->
    <header class="header"> 
      <div class="container nav">
        <div class="logo">
          <img src="PrimeLogo.png" alt="Лого" />
        </div>

        <nav class="navigation" id="siteNav">
          <a href="#services">Услуги</a>
          <a href="#programs">Программы</a>
          <a href="#results">Результаты</a>
          <a href="#calculator">Калькулятор</a>
          <a href="#contact">Контакты</a>
        </nav>
        
        <a class= "header-phone" href="tel:+79101107332">+7 (910) 110-73-32</a>

        <button id="navToggle" class="nav-toggle" aria-label="Переключить меню" aria-expanded="false" aria-controls="siteNav">
          <span></span><span></span><span></span>
        </button>


        <button class="btn btn-primary nav-btn" data-modal-open="contactModal">Оставить заявку</button>

      </div>
    </header>

    <!-- Hero Section -->
    <section id="hero" class="hero" data-animate="animate__fadeIn">
      <div class="container hero-content">
        <div class="hero-text">
          <h1>Системный бизнес<br />на&nbsp;маркетплейсах</h1>
          <p>
            Подберите нишу, разработайте стратегию и создайте сильный бренд
            вместе с нашей командой экспертов.
          </p>
          <button class="btn btn-primary" data-modal-open="contactModal">
            Запись на онлайн‑экскурсию
          </button>
        </div>
      </div> 
        <div class="hero-image">
          <div class="hero-stage">
            <img class="hero-chel"   src="chel.png"   alt="Специалист агентства" />
            <img class="hero-grafik" src="grafik.png" alt="График роста" />

            <img class="hero-badge hero-wb"   src="wb.png"   alt="Wildberries" />
            <img class="hero-badge hero-ozon" src="ozon.png" alt="Ozon" />

            <div class="hero-counter" aria-label="Количество проектов">
              <span class="hero-counter-number" data-target="258">0</span>
              <span class="hero-counter-label">Проектов</span>
            </div>
          </div>
        </div>
              <!-- Бегущая полоса -->
      <div class="ticker" id="features-ticker">
        <div class="ticker__mask">
          <ul class="ticker__lane" id="lane1">
            <li class="ticker__item">СВОЕ ПРОИЗВОДСТВО</li>
            <li class="ticker__item">НАСТАВНИЧЕСТВО</li>
            <li class="ticker__item">БИЗНЕС НА WILDBERRIES</li>
            <li class="ticker__item">ВЕДЕНИЕ СЕЛЛЕРОВ</li>
            <li class="ticker__item">ОБУЧЕНИЕ С НУЛЯ</li>
          </ul>
          <ul class="ticker__lane" id="lane2" aria-hidden="true"></ul>
        </div>
      </div>
    </div>  
    </section>  
    <!-- Start Section -->
    <section id="start" class="start" data-animate="animate__fadeInUp">
      <div class="container">
        <h2>Быстрый старт бизнеса с&nbsp;нами&nbsp;— это:</h2>
        <div class="cards">
          <div class="card">
            <i class="fas fa-search-dollar"></i>
            <h3>Подбор ниши</h3>
            <p>
              Определяем направления, которые помогут быстро выйти на рынок и
              начать зарабатывать.
            </p>
          </div>
          <div class="card">
            <i class="fas fa-chart-line"></i>
            <h3>Разработка стратегии</h3>
            <p>
              Строим план продвижения и подбираем инструменты под ваш
              бюджет.
            </p>
          </div>
          <div class="card">
            <i class="fas fa-cube"></i>
            <h3>Создание бренда</h3>
            <p>
              Помогаем с производством, закупкой и брендингом вашей
              продукции.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Control Section -->
    <section id="control" class="control" data-animate="animate__fadeInUp">
      <div class="container control-content">
        <div class="control-image">
          <img
            src="phone.png"
            alt="Аналитика и графики"
          />
        </div>
        <div class="control-text">
          <h2>
            Мы берём на себя контроль<br />и&nbsp;увеличиваем вашу
            прибыль
          </h2>
          <p>
            Получите системный бизнес на маркетплейсах: от оптимизации
            процессов до роста оборота.
          </p>
          <button class="btn btn-primary" data-modal-open="contactModal">Бесплатная консультация</button>
          <div class="metrics">
            <div class="metric">
              <span class="metric-value">4+</span>
              <span class="metric-label">проекта</span>
            </div>
            <div class="metric">
              <span class="metric-value">6&nbsp;млн</span>
              <span class="metric-label">оборот в месяц</span>
            </div>
            <div class="metric">
              <span class="metric-value">7+</span>
              <span class="metric-label">учеников</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Programs Section -->
    <section id="programs" class="programs" data-animate="animate__fadeInUp">
      <div class="container">
        <h2>Наши программы</h2>
        <div class="program-cards">
          <div class="program-card program-card-green">
            <h3>Ведение бизнеса «под ключ»</h3>
            <p>Полное сопровождение вашего бизнеса с&nbsp;нуля до стабильной прибыли на маркетплейсах.</p>

            <a href="#"
              class="btn btn-outline"
              data-modal-open="contactModal">Подробнее</a>
          </div>

          <div class="program-card program-card-blue">
            <h3>Обучение: с&nbsp;нуля до&nbsp;PRO</h3>
            <p>Пошаговый курс по созданию системного бизнеса без воды и сложной терминологии.</p>

            <a href="#"
              class="btn btn-outline"
              data-modal-open="contactModal">Подробнее</a>
          </div>
        </div>
      </div>
    </section>

    <!-- Results Section -->
    <section id="results" class="results" data-animate="animate__fadeInUp">
      <div class="container">
        <h2>Результаты наших клиентов</h2>
        <div class="result-cards">
          <div class="result-card">
            <div class="result-image">
              <img class="result-img1" src="bruki.png" alt="результат" />
            </div>
            <h4>Ниша товара: женские брюки</h4>
            <p>  
              <strong>До:</strong> 152&nbsp;млн&nbsp;₽ в год<br />
              <strong>После:</strong> 1&nbsp;232&nbsp;млн&nbsp;₽ в год
            </p>
            <button class="btn btn-primary" data-modal-open="contactModal">Хочу также</button>
          </div>
          <div class="result-card">
            <div class="result-image">
              <img class="result-img1" src="result2.png" alt="результат2" />
            </div>
            <h4>Ниша товара: свитера и кардиганы</h4>
            <p>
              <strong>До:</strong> 60&nbsp;млн&nbsp;₽ в год<br />
              <strong>После:</strong> 420&nbsp;млн&nbsp;₽ в год
            </p>
            <button class="btn btn-primary" data-modal-open="contactModal">Хочу также</button>
          </div>
          <div class="result-card">
            <div class="result-image">
              <img class="result-img1" src="result3.png" alt="результат" />
            </div>
            <h4>Ниша товара: детская обувь</h4>
            <p>
              <strong>До:</strong> 0&nbsp;₽ (кабинет с нуля)<br />
              <strong>После:</strong> 36&nbsp;млн&nbsp;₽ в год
            </p>
            <button class="btn btn-primary" data-modal-open="contactModal">Хочу также</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Audit Call-to-Action Section -->
    <section id="audit" class="audit" data-animate="animate__fadeInUp">
      <div class="container audit-content">
        <div class="audit-text">
          <h2>Сколько денег вы теряете каждый день?</h2>
          <p>
            Запишитесь на бесплатный разбор вашего магазина с бизнес-аналитиком.
          </p>
        </div>
          <form class="audit-form">
            <input type="text" name="name" placeholder="Имя" required />
            <input type="tel" name="phone" placeholder="Телефон" required />
            <input type="email" name="email" placeholder="E‑mail" required />
          <button type="submit" class="btn btn-dark">
            Заказать аудит
          </button>
          <small
            >Оставляя заявку, вы соглашаетесь с политикой
            конфиденциальности</small
          >
        </form>
      </div>
    </section>

    <!-- Advantages Section -->
    <section id="advantages" class="advantages" data-animate="animate__fadeInUp">
      <div class="container">
        <h2>Почему выбирают нас</h2>
        <div class="adv-grid">
          <div class="adv-item">
            <i class="fas fa-users"></i>
            <h3>Экспертная команда</h3>
            <p>
              Узкопрофильные специалисты закрывают все задачи: от аналитики
              до логистики.
            </p>
          </div>
          <div class="adv-item">
            <i class="fas fa-check-circle"></i>
            <h3>Избавим от рутины</h3>
            <p>
              Берём на себя работу с поставщиками, документооборот и
              маркетинг.
            </p>
          </div>
          <div class="adv-item">
            <i class="fas fa-lightbulb"></i>
            <h3>Методики и алгоритмы</h3>
            <p>
              Применяем проверенные стратегии продвижения и оптимизации.
            </p>
          </div>
          <div class="adv-item">
            <i class="fas fa-box-open"></i>
            <h3>Закупки и производство</h3>
            <p>
              Находим надёжных поставщиков и организуем брендинг
              продукции.
            </p>
          </div>
          <div class="adv-item">
            <i class="fas fa-warehouse"></i>
            <h3>Фулфилмент</h3>
            <p>
              Обеспечиваем хранение, упаковку и доставку товара до
              склада маркетплейса.
            </p>
          </div>
          <div class="adv-item">
            <i class="fas fa-tachometer-alt"></i>
            <h3>Оперативность</h3>
            <p>
              Быстро решаем возникшие проблемы и даём прозрачную
              отчётность.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Calculator Section -->
    <section id="calculator" class="calculator" data-animate="animate__fadeInUp">
      <div class="container">
        <h2>Рассчитайте стоимость ведения</h2>
        <p class="calculator-intro">
          Выберите количество SKU (артикулов), чтобы узнать ориентировочную стоимость комплексного ведения вашего кабинета.
        </p>
        <div class="cost-calculator">
          <label for="skuRange" class="sku-label">
            Количество SKU: <span id="skuValue">1</span>
          </label>
          <input type="range" id="skuRange" min="1" max="150" value="1" step="1" />
          <div class="cost-display">
            <p>Стоимость ведения:</p>
            <span id="skuCost">65 000 руб./мес</span>
          </div>
          <button class="btn btn-primary cost-button" data-modal-open="contactModal">Заказать ведение</button>
        </div>
        <ul class="calculator-features">
          <li><i class="fas fa-check-circle"></i> Индивидуальная стратегия продвижения</li>
          <li><i class="fas fa-check-circle"></i> Создание и оптимизация карточек товаров</li>
          <li><i class="fas fa-check-circle"></i> Полное брендирование и фулфилмент</li>
          <li><i class="fas fa-check-circle"></i> Аналитика и отчётность</li>
        </ul>
      </div>
    </section>

    <!-- Services Section -->
    <section id="services" class="services" data-animate="animate__fadeInUp">
      <div class="container">
        <h2>Направления работы</h2>
        <div class="service-cards">
          <div class="service-card">
            <img src="https://static.tildacdn.com/tild3132-3064-4038-b538-363330663438/1.svg" alt="Ведение под ключ" />
            <div class="service-info">
              <h3>Ведение «под ключ»</h3>
              <p>
                Полный цикл сопровождения вашего бизнеса на маркетплейсах
                – от анализа до доставки.
              </p>
              <button class="btn btn-secondary" data-modal-open="contactModal">Узнать подробнее</button>
            </div>
          </div>
          <div class="service-card">
            <img src="https://static.tildacdn.com/tild3239-6438-4564-b339-663839303133/Frame_522.svg" alt="Трекерство" />
            <div class="service-info">
              <h3>Трекерство</h3>
              <p>
                Быстрый рост действующих кабинетов под руководством
                экспертов.
              </p>
              <button class="btn btn-secondary" data-modal-open="contactModal">Узнать подробнее</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Testimonials Section -->
    <section id="testimonials" class="testimonials" data-animate="animate__fadeInUp">
      <div class="container">
        <h2>Отзывы наших клиентов</h2>
        <div class="testimonial-grid">
          <div class="testimonial">
            <p>
              «Команда Prime Analytics помогла нам выйти на маркетплейс и быстро
              увеличить оборот. Спасибо за вашу работу!»
            </p>
            <span>— Клиент&nbsp;А</span>
          </div>
          <div class="testimonial">
            <p>
              «Обучение было максимально полезным. Теперь
              самостоятельно управляю своим магазином и вижу стабильный
              рост продаж.»
            </p>
            <span>— Клиент&nbsp;Б</span>
          </div>
          <div class="testimonial">
            <p>
              «Рекомендую всем, кто хочет создать бренд с нуля.
              Наставники поддерживали на каждом шаге.»
            </p>
            <span>— Клиент&nbsp;В</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Process Section -->
    <section id="process" class="process" data-animate="animate__fadeInUp">
      <div class="container">
        <h2>Как мы работаем</h2>
        <div class="timeline">
          <div class="step">
            <span class="step-number">1</span>
            <h3>Консультация</h3>
            <p>
              Определяем ваши цели и подбираем необходимый набор услуг.
            </p>
          </div>
          <div class="step">
            <span class="step-number">2</span>
            <h3>Стратегия</h3>
            <p>
              Разрабатываем индивидуальный план продвижения и
              развития.
            </p>
          </div>
          <div class="step">
            <span class="step-number">3</span>
            <h3>Запуск</h3>
            <p>
              Организуем запуск: от закупок до оформления карточек.
            </p>
          </div>
          <div class="step">
            <span class="step-number">4</span>
            <h3>Рост</h3>
            <p>
              Поддерживаем и масштабируем ваш бизнес, отслеживая
              результаты.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Consultation Section -->
    <section id="consultation" class="consultation" data-animate="animate__fadeInUp">
      <div class="container consultation-content">
        <h2>Записаться на консультацию</h2>
        <p>
          Оставьте заявку — и мы перезвоним, чтобы ответить на все ваши
          вопросы.
        </p>
        <button class="btn btn-primary btn-large" data-modal-open="contactModal">Запись на консультацию</button>
      </div>
    </section>

    <!-- Partner Section -->
    <section id="partner" class="partner" data-animate="animate__fadeInUp">
      <div class="container partner-content">
        <div class="partner-text">
          <h2>Партнерская программа</h2>
          <p>
            Зарабатывайте до&nbsp;15&nbsp;% с каждого клиента по нашей
            партнёрской программе.
          </p>
          <button class="btn btn-primary" data-modal-open="contactModal" >Стать партнёром</button>
        </div>
        <div class="partner-image">
          <img
            src="partner.png"
            alt="Партнёрская программа"
          />
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer id="contact" class="footer">
      <div class="container footer-content">
        <div class="footer-column">
          <div class="logo">
            <img src="PrimeLogo.png" alt="Лого" />
          </div>
          <p class="footer-tagline">
            Системный подход к вашему бизнесу на маркетплейсах.
          </p>
        </div>
        <div class="footer-column">
          <h4>Навигация</h4>
          <a href="#services">Услуги</a>
          <a href="#programs">Программы</a>
          <a href="#results">Результаты</a>
          <a href="#advantages">Преимущества</a>
          <a href="#process">Как мы работаем</a>
        </div>
        <div class="footer-column">
          <h4>Контакты</h4>
          <p>+7&nbsp;(910)&nbsp;110‑73‑32</p>
          <div class="social-links social-links--lg">
          <a class="social-link social-link--tg" href="https://t.me/primeanalytics24" aria-label="Telegram">
            <i class="fab fa-telegram"></i>
          </a>
          <a class="social-link social-link--wa" href="https://wa.me/79101107332" aria-label="WhatsApp">
            <i class="fab fa-whatsapp"></i>
          </a>
        </div>
        </div>
        <div class="footer-column">
          <h4>Наши офисы</h4>
          <p>г.&nbsp;Москва, Ленинградский проспект, 15с10</p>
        </div>
      </div>
      <div class="container footer-bottom">
        <p>&copy;&nbsp;2025&nbsp;Prime Analytics. Все права защищены.</p>
      </div>
    </footer>

    <!-- Modal: Контактная форма -->
    <div id="contactModal" class="modal" aria-hidden="true">
      <div class="modal__backdrop" data-modal-close></div>

      <div class="modal__dialog" role="dialog" aria-modal="true" aria-labelledby="contactModalTitle">
        <button class="modal__close" aria-label="Закрыть" data-modal-close>✕</button>

        <h2 id="contactModalTitle" class="modal__title">Оставьте свои контактные данные</h2>
        <p class="modal__subtitle">Наш менеджер свяжется с вами в ближайшее время.</p>

        <form class="modal__form" action="#" method="post" novalidate>
          <label class="field">
            <input type="text" name="name" placeholder="Имя" required>
          </label>

          <label class="field field--phone">
            <span class="flag" aria-hidden="true">🇷🇺</span>
            <input id="phone" type="tel" name="phone"
                  inputmode="tel"
                  placeholder="+7 (___) ___-__-__"
                  autocomplete="tel"
                  pattern="^\+7\s\(\d{3}\)\s\d{3}-\d{2}-\d{2}$"
                  required>
          </label>

          <label class="field">
            <input type="email" name="email" placeholder="Почта" autocomplete="email" required>
          </label>

          <button type="submit" class="btn-primary">Связаться</button>
          <p class="modal__legal">
            Оставляя заявку, вы соглашаетесь на
            <a href="/privacy" target="_blank" rel="noopener">обработку персональных данных</a>.
          </p>
        </form>
      </div>
    </div>


    <!-- Calculator Scripts -->
    <script>
      // Обновляет отображение стоимости ведения в зависимости от выбранного количества SKU
      function updateCost() {
        const sku = parseInt(document.getElementById('skuRange').value) || 1;
        // Обновляем отображение выбранного числа артикулов
        document.getElementById('skuValue').textContent = sku;
        let cost;
        if (sku <= 40) {
          cost = 65000;
        } else if (sku <= 60) {
          cost = 70000;
        } else if (sku <= 80) {
          cost = 75000;
        } else if (sku <= 100) {
          cost = 85000;
        } else if (sku <= 150) {
          cost = 95000;
        } else {
          cost = 0;
        }
        // Если цена определена, форматируем её, иначе показываем «По запросу»
        const costText = cost
          ? cost.toLocaleString('ru-RU') + ' руб./мес'
          : 'По запросу';
        document.getElementById('skuCost').textContent = costText;
      }
      // При загрузке страницы и изменении бегунка пересчитываем стоимость
      document.addEventListener('DOMContentLoaded', function () {
        const range = document.getElementById('skuRange');
        if (range) {
          updateCost();
          range.addEventListener('input', updateCost);
        }
      });
    </script>

    <!-- UI interactions and animations -->
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        // Mobile navigation toggle
        const navToggle = document.getElementById('navToggle');
        const navigation = document.querySelector('.navigation');
        if (navToggle && navigation) {
          navToggle.addEventListener('click', function () {
            navigation.classList.toggle('show');
          });
        }
        // Intersection Observer for animations
        const animatedElements = document.querySelectorAll('[data-animate]');
        const observer = new IntersectionObserver(
          (entries, obs) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting) {
                const animClass = entry.target.dataset.animate;
                entry.target.classList.add('animate__animated', animClass);
                obs.unobserve(entry.target);
              }
            });
          },
          { threshold: 0.1 }
        );
        animatedElements.forEach((el) => observer.observe(el));
      });
    </script>
    <!-- бегущая полоса -->
    <script>
    (function(){
      const root = document.getElementById('features-ticker');
      if(!root) return;

      const mask  = root.querySelector('.ticker__mask');
      const lane1 = root.querySelector('#lane1');
      const lane2 = root.querySelector('#lane2');

      // Ждём шрифты/страницу, чтобы измерения были точными
      const ready = ('fonts' in document && document.fonts.ready)
        ? document.fonts.ready
        : new Promise(res => window.addEventListener('load', res));

      ready.then(init);

      function init(){
        // 1) Гарантируем, что ширина lane1 > ширины маски,
        //    чтобы lane2 стартовала за пределом экрана
        ensureLaneWiderThanMask();

        // 2) Клонируем контент lane1 в lane2 (один раз)
        lane2.innerHTML = lane1.innerHTML;

        // 3) Выставляем точную ширину цикла и запускаем анимацию
        setCycleWidth();
        root.classList.add('is-ready');

        // 4) Пересчёт при ресайзе без рывка
        let raf;
        window.addEventListener('resize', () => {
          cancelAnimationFrame(raf);
          root.classList.remove('is-ready');            // пауза
          raf = requestAnimationFrame(() => {
            setCycleWidth();
            // форсим рефлоу, затем снова включаем
            void lane1.offsetWidth;
            root.classList.add('is-ready');
          });
        }, { passive:true });
      }

      function ensureLaneWiderThanMask(){
        // если один набор короче видимой области, дублируем его внутри lane1
        const items = Array.from(lane1.children);
        if (!items.length) return;

        while (lane1.scrollWidth < mask.clientWidth + 1) {
          lane1.append(...items.map(n => n.cloneNode(true)));
        }
      }

      function setCycleWidth(){
        // ширина цикла = фактическая ширина lane1 (после расширения)
        const w = lane1.scrollWidth;
        root.style.setProperty('--w', w + 'px');
      }
    })();
    </script>
                                                                               <!-- Секция hero -->
    <script>
(function(){
  const el = document.querySelector('.hero-counter-number');
  if(!el) return;

  const maxTarget = 568;
  const target = Math.min(parseInt(el.dataset.target || maxTarget, 10), maxTarget);
  const duration = 9999; // мс
  const reduce = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

  function animate(){
    if(reduce){ el.textContent = String(target); return; }
    const start = performance.now();
    function tick(now){
      const t = Math.min((now - start) / duration, 1);
      const eased = 1 - Math.pow(1 - t, 3);      // easeOutCubic
      el.textContent = String(Math.round(eased * target));
      if(t < 1) requestAnimationFrame(tick);
    }
    requestAnimationFrame(tick);
  }

  // Запуск, когда круг виден (чтобы не дёргать за кадром)
  const io = new IntersectionObserver((entries) => {
    if(entries.some(e => e.isIntersecting)){
      animate(); io.disconnect();
    }
  }, { threshold: 0.35 });
  io.observe(el);
})();
</script>

<script>
(function(){
  const modal = document.getElementById('contactModal');
  if(!modal) return;
  const dialog = modal.querySelector('.modal__dialog');
  const phone  = modal.querySelector('#phone');
  let lastActive = null;

  // OPEN
  document.addEventListener('click', (e)=>{
    const btn = e.target.closest('[data-modal-open="contactModal"]');
    if(!btn) return;
    lastActive = document.activeElement;
    modal.classList.add('is-open');
    document.body.classList.add('modal-open');
    setTimeout(()=> (modal.querySelector('input[name="name"]')||phone).focus(), 50);
  });

  // CLOSE
  function close(){
    modal.classList.remove('is-open');
    document.body.classList.remove('modal-open');
    if(lastActive) lastActive.focus();
  }
  modal.addEventListener('click', (e)=>{
    if(e.target.hasAttribute('data-modal-close') || !dialog.contains(e.target)) close();
  });
  document.addEventListener('keydown', (e)=>{
    if(e.key === 'Escape' && modal.classList.contains('is-open')) close();
  });

  // Simple RU phone mask: +7 (999) 999-99-99
  function maskPhone(value){
    const d = value.replace(/\D/g,'').replace(/^8/, '7');
    const p = ['+7',' (', d.slice(1,4), ') ', d.slice(4,7), '-', d.slice(7,9), '-', d.slice(9,11)]
      .join('').replace(/[-\s()]+$/,'');
    return p;
  }
  phone.addEventListener('input', (e)=>{
    const start = e.target.selectionStart;
    e.target.value = maskPhone(e.target.value);
    // каретка к концу (просто и надёжно)
    e.target.setSelectionRange(e.target.value.length, e.target.value.length);
  });
  phone.addEventListener('focus', (e)=>{
    if(!e.target.value) e.target.value = '+7 ';
  });
})();
document.addEventListener('click', (e)=>{
  const btn = e.target.closest('[data-modal-open="contactModal"]');
  if (!btn) return;
  if (btn.tagName === 'A') e.preventDefault();   // ← чтобы не прыгал якорь
  // дальше — открытие модалки:
  lastActive = document.activeElement;
  modal.classList.add('is-open');
  document.body.classList.add('modal-open');
  setTimeout(()=> (modal.querySelector('input[name="name"]')||phone).focus(), 50);
});

</script>
<script src="form.js"></script>

<script>
(function(){
  const btn = document.getElementById('navToggle');
  const nav = document.getElementById(btn?.getAttribute('aria-controls') || 'siteNav');
  if(!btn || !nav) return;

  // Бэкдроп (создаём, если нет)
  let bd = document.querySelector('.nav-backdrop');
  if(!bd){
    bd = document.createElement('div');
    bd.className = 'nav-backdrop';
    document.body.appendChild(bd);
  }

  // Портал: на время открытия переносим nav в body — обход любых z-index/overflow у шапки
  const placeholder = document.createComment('nav-placeholder');
  let portaled = false;
  function portalIn(){
    if(portaled) return;
    nav.parentNode.insertBefore(placeholder, nav);
    document.body.appendChild(nav);
    portaled = true;
  }
  function portalOut(){
    if(!portaled) return;
    placeholder.parentNode.insertBefore(nav, placeholder);
    placeholder.remove(); portaled = false;
  }

  function openMenu(){
    portalIn();
    btn.classList.add('is-active'); btn.setAttribute('aria-expanded','true');
    nav.classList.add('is-open');
    bd.hidden = false; requestAnimationFrame(()=> bd.classList.add('is-open'));
    document.body.classList.add('no-scroll');
  }
  function closeMenu(){
    btn.classList.remove('is-active'); btn.setAttribute('aria-expanded','false');
    nav.classList.remove('is-open');
    bd.classList.remove('is-open'); document.body.classList.remove('no-scroll');
    setTimeout(()=> (bd.hidden = true), 200);
    portalOut();
  }

  btn.addEventListener('click', ()=> nav.classList.contains('is-open') ? closeMenu() : openMenu());
  bd.addEventListener('click', closeMenu);
  document.addEventListener('keydown', (e)=>{ if(e.key==='Escape' && nav.classList.contains('is-open')) closeMenu(); });
  nav.addEventListener('click', (e)=>{ if (e.target.closest('a,[data-modal-open]')) closeMenu(); });

  // Возврат на десктоп — закрыть
  const mq = window.matchMedia('(min-width: 770px)');
  (mq.addEventListener ? mq.addEventListener('change', onChange) : mq.addListener(onChange));
  function onChange(ev){ if(ev.matches) closeMenu(); }
})();
</script>

<script>
(function(){
  const nav = document.getElementById('siteNav');
  const toggle = document.getElementById('navToggle');
  if(!nav) return;

  function ensureMobileCTA(){
    if (window.innerWidth > 769) return;         // Только на мобиле
    if (!nav.querySelector('.nav-cta')) {        // Добавляем один раз
      const cta = document.createElement('a');
      cta.className = 'nav-cta btn btn-primary';
      cta.href = '#';
      cta.textContent = 'Оставить заявку';
      cta.setAttribute('data-modal-open','contactModal'); // открывает твою модалку
      nav.appendChild(cta);
    }
  }

  // При клике на бургер — добавить CTA (если её ещё нет)
  if (toggle) {
    toggle.addEventListener('click', () => {
      requestAnimationFrame(ensureMobileCTA);
    });
  }

  // На случай, если меню уже открыто и делают ресайз
  window.addEventListener('resize', ensureMobileCTA);

  // Подстраховка: при первой загрузке на мобильной ширине тоже создадим
  if (window.innerWidth <= 769) ensureMobileCTA();
})();
</script>

<script>
(function(){
  const range   = document.getElementById('skuRange');
  const outVal  = document.getElementById('skuValue');
  const outCost = document.getElementById('skuCost');
  const costBox = document.querySelector('.cost-display');
  if(!range || !outVal || !outCost || !costBox) return;

  // Обернём range в .range-wrap (для блика) — без бабблы
  if (!range.parentElement.classList.contains('range-wrap')) {
    const wrap = document.createElement('div');
    wrap.className = 'range-wrap';
    range.parentNode.insertBefore(wrap, range);
    wrap.appendChild(range);
  }

  // Форматтер цены
  const fmt = new Intl.NumberFormat('ru-RU');

  // Ориентировочная формула стоимости
  function calcPrice(n){
    const base = 65000; // 1 SKU
    if (n <= 10) return base + (n-1)*3000;
    if (n <= 50) return base + 9*3000 + (n-10)*2000;
    return base + 9*3000 + 40*2000 + (n-50)*1000;
  }

  function update(){
    const min = +range.min, max = +range.max, val = +range.value;
    const pct = (val - min) / (max - min) * 100;

    // WebKit: процент заливаем трек через CSS-переменную
    range.style.setProperty('--pct', pct + '%');

    // Вывод
    outVal.textContent = val;
    outCost.textContent = fmt.format(calcPrice(val)) + ' руб./мес';

    // лёгкий «поп» у стоимости
    costBox.classList.remove('flash');
    void costBox.offsetWidth;
    costBox.classList.add('flash');
  }

  update();
  range.addEventListener('input', update);
  window.addEventListener('resize', update);
})();
</script>


  </body>
</html>
